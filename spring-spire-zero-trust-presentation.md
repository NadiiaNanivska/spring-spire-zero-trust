---
marp: true
theme: rose-pine-moon
paginate: false
---

<style>
table {
  color: #e0def4;
  border-collapse: collapse;
}
th, td {
  border: 1px solid #44415a; 
  padding: 8px 12px;
  background-color: #2a273f;
  color: #e0def4;
}
th {
  background-color: #3e3a5a;
}
section {
  padding-bottom: 80px !important;
}
</style>

# Розгортання мікросервісів у Zero-Trust середовищі з використанням SPIRE
### *Модель загроз та оцінка операційних витрат*

*Нанівська Надія*

---

# План Доповіді

- Проблема довіри у мікросервісах  
- Традиційні методи (JWT, Static TLS)  
- Zero Trust: ключові принципи  
- SPIFFE/SPIRE: ідентичність сервісів  
- Модель загроз (STRIDE)  
- План роботи  
- Очікувані результати  

---

# Проблема: "Як довіряти?"  

У мікросервісній архітектурі ключове питання:

1. Як **`orders-service`** може бути впевнений, що він говорить зі *справжнім* `payments-service`?
2. Як **`payments-service`** може бути впевнений, що запит надходить саме від `orders-service`, а не від зловмисника?

---

# Традиційні Методи Аутентифікації

| Метод | Як працює | Основна проблема |
| :--- | :--- | :--- |
| **JWT** | Клієнт передає цифровий токен. | Викрадений токен **не можна відкликати**. Refresh-токени — ще гірше. |
| **Static TLS** | Ноди/сервіси мають статичні сертифікати. | Життєвий цикл ключів дуже довгий. Їх важко обслуговувати та ротувати. |

### Спільний недолік:
**Довгоживучі секрети → високий ризик компрометації.**

---

# Чому цього недостатньо?

- Токени часто зберігаються у файлах (K8s Secrets).  
- Статичні TLS ключі можуть існувати **місяцями або роками**.  
- Будь-який витік → негайний доступ зловмисника.  
- Ручна ротація = дорого, повільно, неавтоматизовано.  

---

# Zero-Trust Архітектура

## Ключові ідеї:

- **Ніколи не довіряй, завжди перевіряй.**
- Довіра не ґрунтується на IP, мережі або розташуванні.  
- Кожен запит має бути автентифікований.  
- Ідентичність прив’язується до *workload*, а не до машини чи порту.  

---

# Що таке SPIFFE і SPIRE

**SPIFFE** — стандарт для надання криптографічної ідентичності сервісам у мікросервісних середовищах.  
Ідентичності видаються у вигляді короткоживучих сертифікатів або токенів (SVID), які підтверджують, що сервіс справжній.

**SPIRE** — реалізація SPIFFE, що автоматизує видачу цих ідентичностей:  
- **SPIRE Server** — центральний авторитет, який керує видачею SVID.  
- **SPIRE Agent** — встановлюється на вузлах, перевіряє сервіси та передає їм SVID.

---

![SVG Image](/architecture.png)

---

# Переваги SPIRE

1. **Динамічні ідентичності**  
   — секрети зберігаються лише у пам’яті, не у файлах.

2. **Короткоживучі сертифікати**  
   — термін дії вимірюється хвилинами.

3. **Автоматична ротація**  
   — SVID оновлюється без перезапуску сервісів.

4. **Прив’язка до реального стану середовища**  
   — атестація нод (Kubernetes, VM, cloud).

### Результат
**Вкрадений SVID стає неактцуальним майже миттєво.**

---

# Порівняння Підходів

| Критерій | JWT | Static TLS | SPIRE |
| :--- | :--- | :--- | :--- |
| Тривалість життя секретів | Середня/довга | Дуже довга | Дуже коротка |
| Автоматична ротація | ❌ | ❌ | ✔ |
| Захист від крадіжки секретів | Низький | Середній | Високий |
| Прив’язка до workload | ❌ | Частково | ✔ |
| Zero Trust | Частково | Частково | Повністю |

---

# Модель Загроз (STRIDE)

**STRIDE** — це формальна методологія моделювання загроз, що використовується для систематичної оцінки безпеки.  
Вона допомагає структурувати всі можливі ризики, розбивши їх на шість категорій:

- **S — Spoofing:** підміна особи або сервісу  
- **T — Tampering:** зміна або модифікація даних  
- **R — Repudiation:** неможливість підтвердити виконані дії  
- **I — Information Disclosure:** витік або викрадення чутливої інформації  
- **D — Denial of Service:** порушення доступності системи  
- **E — Elevation of Privileges:** отримання користувачем або сервісом прав, яких у нього не повинно бути  

---

# STRIDE у дослідженні

У рамках магістерської роботи STRIDE застосовується для:

#### 1. Побудови формальної моделі загроз

Для кожної з трьох архітектур:
- JWT → токенова автентифікація  
- Static TLS → статичні сертифікати  
- SPIRE → динамічні SVID та mTLS  

буде сформовано перелік потенційних загроз за всіма шістьма категоріями STRIDE.

---

# План роботи - Етап 1
**Побудова PoC та вимірювання операційних витрат**

- 2 Spring Boot мікросервіси: `orders` → `payments`
- Впровадження SPIRE + java-spiffe
- Продуктивність:
  - Latency  
  - Throughput  
  - CPU / Memory overhead SPIRE Agent  

---

# План роботи - Етап 2
**Формальний та практичний аналіз безпеки**

- Порівняння SPIRE vs JWT vs Static TLS  
- Побудова STRIDE моделей   
- Порівняння стійкості систем  

---

# Стек технологій

- Kubernetes  
- SPIRE Server + Agents  
- Spring Boot microservices  
- Prometheus + Grafana  

Метрики:
- p95/p99 latency  
- CPU/memory  
- Overhead SPIRE Agent  
- Частота ротації SVID  

---

# Очікувані Результати

- Отримати вимірювані дані про роботу SPIRE у мікросервісах.  
- Показати, що статичні токени та ключі легко піддаються компрометації.  
- Довести, що короткоживучі SVID роблять атаки значно менш ефективними.  
- Порівняти три архітектури за моделлю STRIDE.  

---

# Дякую за увагу!
## Питання?


